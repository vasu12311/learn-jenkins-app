pipeline {
    agent any

    stages {

        stage('AZURE'){
            agent{
                docker{
                    image 'bitnami/azure-cli'
                    args "--user root --privileged"
                }
            }

            steps{

                withCredentials([usernamePassword(credentialsId: 'my-jenkins', passwordVariable: 'AZURE_CLIENT_SECRET', usernameVariable: 'AZURE_CLIENT_ID')]) {
                   sh '''
                   az group create --name jenkins-get-started-rg --location eastus
                   az version
                '''  
                }  
            }
        }     
    }
}